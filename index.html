<!DOCTYPE html>
<html lang="en" ng-app="listaCep">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Cep</title>
    <style src="./style.css"></style>
    <script src="./angular.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script>
        //função busca cep
        function buscaCep(parans) {
            const cep = parans.replace(/\D/g, '');
            if (cep != '') {
                let validacep = /^[0-9]{8}$/;
                if (validacep.test(cep)) {
                    document.getElementById('rua').value = "carregando...";

                    let script = document.createElement('script');
                    script.src = 'https://viacep.com.br/ws/' + cep + '/json?callback=retornaCep';
                    document.body.appendChild(script)

                }
            }
        }

        angular.module('listaCep', []);
        angular.module('listaCep').controller('listaCtrl', function ($scope) {

            $scope.app = 'Lista Cep';

            $scope.ceps = [
                {cep: '29809-998', Cidade: 'cianorte', Estado: 'PR', Ibge: '2344' },
                {cep: '29809-998', Cidade: 'cianorte', Estado: 'PR', Ibge: '2344' },
                {cep: '29809-998', Cidade: 'cianorte', Estado: 'PR', Ibge: '2344' }
            ];

            $scope.add = function (cep) {
                console.log($scope.ceps)
                $scope.ceps.push(angular.copy(cep));
                delete $scope.cep;
            }
        })
    </script>

</head>
<body ng-controller="listaCtrl">

    <div class="adicionarCep">
        <input type="text" ng-model="cep.cep" placeholder="DIGITE SEU CEP">
        <button class="btn btn-primary" ng-click="add(cep)">Buscar Agora</button>
        <br>
        <h2>{{app}}</h2>
        <table class="table table-striped">
            <tr>
                <th>Cep</th>
                <th>Cidade</th>
            </tr>
            <tr ng-repeat="c in ceps">
                <td>{{c.cep}}, {{c.cidade}}</td>
                <td></td>
            </tr>
        </table>
        <hr/>
    </div>
</body>

</html>
